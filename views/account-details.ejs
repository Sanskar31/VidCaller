<%- include('./includes/header.ejs') %>
<style>
    #edit-form{
    display: none;
    }
</style>
</head>
<body>
    <%- include('./includes/nav.ejs') %>
    <main class="container bd- main pt-4">
        <div class="columns">
            <div class="column"></div>
            <div class="column">
                <%- include('./partials/login-messages') %>
                <div class="card is-shadow">
                    <div class="card-image">
                        <figure class="image is-4by3">
                            <img src="/<%= imageUrl %>" alt="Placeholder image">
                        </figure>
                    </div>
                    <div class="card-content">
                        <div class="media">
                            <div class="media-left">
                                <figure class="image is-48x48">
                                    <img src="/<%= imageUrl %>" alt="Placeholder image">
                                </figure>
                            </div>
                            <div class="media-content">
                                <p class="title is-4"><%= name %>
                                </p>
                                <p class="subtitle is-6"><%= email %>
                                </p>
                            </div>
                        </div>
                        <hr>
                        <button class="button is-outlined is-small mt-2" id="edit-button">Edit Profile</button>
                        <form id="edit-form" method="POST" action="/user/update-profile" enctype="multipart/form-data">
                        <p class="cart-item">
                            <input type="hidden" name="_csrf" value="<%= csrfToken %>">
                            <div id="file-profile" class="file has-name is-small">
                                <label class="file-label">
                                <input class="file-input" type="file" name="profilePicture" >
                                <span class="file-cta">
                                <span class="file-icon">
                                <i class="fas fa-upload"></i>
                                </span>
                                <span class="file-label">
                                Update Picture
                                </span>
                                </span>
                                <span class="file-name" id="file-name">
                                No File Chosen
                                </span>
                                </label>
                                <button class="button is-success is-small ml-3" type="submit">Update</button>
                            </div>
                        </form>
                        </p>
                    </div>
                </div>
            </div>
            <div class="column"></div>
        </div>
    </main>
    <script>
        const fileInput = document.querySelector('#file-profile input[type=file]');
        fileInput.onchange = () => {
          if (fileInput.files.length > 0) {
            const fileName = document.querySelector('#file-profile .file-name');
            fileName.textContent = fileInput.files[0].name;
          }
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function(){
           $("#edit-button").click(function(){
              $("#edit-form").fadeIn();
           });
        });
    </script><%- include('./includes/footer.ejs') %>